<div class="products-page">
  <div class="products-container">
    <h2 class="title">Our Products</h2>

    <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>
    <div *ngIf="!errorMessage && products.length === 0" class="info">No products found.</div>

    <div class="grid" *ngIf="products.length">
      <div class="card" *ngFor="let p of products; trackBy: trackById">
        <div class="thumb-wrap">
          <div class="card-thumb">
            <img [src]="imgSrc(p.pictureUrl)" alt="{{ p.name }}" />
          </div>
          <span *ngIf="outOfStock(p)" class="badge-out">Out of stock</span>
        </div>

        <div class="meta">
          <h5 class="name">{{ p.name }}</h5>
          <p class="desc">{{ p.description }}</p>
        </div>
        <div class="prock">
            <p class="price">{{ p.price | number:'1.2-2' }} €</p>
            <p class="stock">In stock: {{ stockOf(p) }}</p>
        </div>
        
        <div class="actions">
            <div class="qty-controls">
            <button type="button" (click)="decrease(p)" [disabled]="!canDecrease(p)">−</button>
            <span class="qty">{{ quantities[p.id] }}</span>
            <button type="button" (click)="increase(p)" [disabled]="!canIncrease(p)">+</button>
          </div>

          <button
            type="button"
            class="btn-cart"
            (click)="addToCart(p)"
            [disabled]="outOfStock(p)"
            [title]="outOfStock(p) ? 'Out of stock' : 'Add to cart'"
          >
            Add to cart
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
